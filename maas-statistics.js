// ==UserScript==
// @name			Maas статистика
// @version			1.11
// @description		Отображает статистику работы
// @updateURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/maas-statistics.js
// @downloadURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/maas-statistics.js
// @author			saddedmoroz
// @match			https://moderation.avito.ru/line/*
// ==/UserScript==

'use strict';

const _0x4c5146=_0x4721;(function(_0x57cea1,_0x57448f){const _0x5bdfe7=_0x4721,_0xd7c8a2=_0x57cea1();while(!![]){try{const _0x4b5ff4=-parseInt(_0x5bdfe7(0x115))/0x1+-parseInt(_0x5bdfe7(0x114))/0x2+parseInt(_0x5bdfe7(0x109))/0x3*(parseInt(_0x5bdfe7(0x11c))/0x4)+parseInt(_0x5bdfe7(0xf1))/0x5+parseInt(_0x5bdfe7(0x111))/0x6*(parseInt(_0x5bdfe7(0x113))/0x7)+-parseInt(_0x5bdfe7(0xf9))/0x8+parseInt(_0x5bdfe7(0x119))/0x9;if(_0x4b5ff4===_0x57448f)break;else _0xd7c8a2['push'](_0xd7c8a2['shift']());}catch(_0x46d959){_0xd7c8a2['push'](_0xd7c8a2['shift']());}}}(_0xde79,0x70331));if(Boolean(localStorage[_0x4c5146(0xee)]('scriptDataArray')))localStorage[_0x4c5146(0x123)](_0x4c5146(0x11d));const audioTick=new Audio('https://flukeout.github.io/simple-sounds/sounds/coin.mp3');document[_0x4c5146(0xf5)][_0x4c5146(0xf4)]('beforeend',_0x4c5146(0x110));const span_time_local=document[_0x4c5146(0xf7)](_0x4c5146(0xf3)),span_time_inactive=document['getElementById'](_0x4c5146(0x118)),span_count=document[_0x4c5146(0xf7)](_0x4c5146(0x122)),span_cph=document[_0x4c5146(0xf7)](_0x4c5146(0xf2)),date_recentActivity=new Date();let scriptData=null;const ScriptDataInit=()=>scriptData={'notifyTimeout':0x0,'hour':new Date()['getHours'](),'count':0x0,'cph':0x0},ScriptDataLoad=()=>scriptData=JSON[_0x4c5146(0x103)](localStorage['getItem'](lineName)),storageKeyLinesNames=_0x4c5146(0xf8),StorageUpdate=()=>localStorage[_0x4c5146(0x112)](lineName,JSON[_0x4c5146(0x10c)](scriptData));let lineName=window['location']['href'][_0x4c5146(0xfa)](/line\/.+?\//gi);if(Boolean(lineName)){lineName=lineName[0x0],lineName='counter_'+lineName[_0x4c5146(0x11b)](0x5,lineName['length']-0x1),ScriptDataInit();const hour_now=date_recentActivity[_0x4c5146(0xfb)]();Boolean(localStorage[_0x4c5146(0xee)](lineName))?(ScriptDataLoad(),scriptData['hour']!==hour_now&&(scriptData[_0x4c5146(0x101)]=hour_now,scriptData[_0x4c5146(0xf2)]=0x0,StorageUpdate())):(ScriptDataInit(),StorageUpdate()),UpdateLinesNames();}else console[_0x4c5146(0x108)](_0x4c5146(0xf6));let time_inactive=0x0;const time_local=new Date();setInterval(()=>{const _0x1ed5d9=_0x4c5146;if(!Boolean(scriptData))return;span_count['textContent']=scriptData[_0x1ed5d9(0x122)],span_cph[_0x1ed5d9(0x10b)]=scriptData[_0x1ed5d9(0xf2)],time_local[_0x1ed5d9(0xed)](Date[_0x1ed5d9(0x11a)]()),span_time_local[_0x1ed5d9(0x10b)]=time_local[_0x1ed5d9(0x106)](),time_inactive=parseInt((Date['now']()-date_recentActivity)/0x3e8);if(time_inactive<0x3c)span_time_inactive['textContent']=time_inactive;else span_time_inactive[_0x1ed5d9(0x10b)]=parseInt(time_inactive/0x3c)+':'+time_inactive%0x3c;if(scriptData['notifyTimeout']){if(time_inactive>0x0&&time_inactive%scriptData[_0x1ed5d9(0x10f)]==0x0)audioTick[_0x1ed5d9(0x11f)]();}},0x3e8);function _0x4721(_0x2e11b2,_0x34551c){const _0xde7993=_0xde79();return _0x4721=function(_0x4721c4,_0x911dc5){_0x4721c4=_0x4721c4-0xec;let _0x495a0e=_0xde7993[_0x4721c4];return _0x495a0e;},_0x4721(_0x2e11b2,_0x34551c);}function UpdateLinesNames(){const _0x254af8=_0x4c5146;let _0x47730c=localStorage[_0x254af8(0xee)](storageKeyLinesNames);if(Boolean(_0x47730c)){if(_0x47730c['includes'](lineName))return;_0x47730c=JSON[_0x254af8(0x103)](_0x47730c),_0x47730c[_0x254af8(0x105)](lineName),localStorage[_0x254af8(0x112)](storageKeyLinesNames,JSON[_0x254af8(0x10c)](_0x47730c));}else localStorage['setItem'](storageKeyLinesNames,JSON[_0x254af8(0x10c)]([lineName]));}function IncrementCounters(){const _0x6975c0=_0x4c5146;time_inactive=0x0,date_recentActivity[_0x6975c0(0xed)](Date['now']());const _0x12a250=date_recentActivity[_0x6975c0(0xfb)]();if(_0x12a250===scriptData['hour'])scriptData[_0x6975c0(0xf2)]+=0x1;else scriptData[_0x6975c0(0xf2)]=0x1,scriptData[_0x6975c0(0x101)]=_0x12a250;scriptData[_0x6975c0(0x122)]+=0x1,StorageUpdate();}document[_0x4c5146(0x10d)](_0x4c5146(0x102),_0x50c099=>{const _0x48eb46=_0x4c5146,_0xae84cb=document[_0x48eb46(0xff)](_0x48eb46(0x121));if(!Boolean(_0xae84cb))return;if(_0xae84cb[_0x48eb46(0x11e)](_0x50c099[_0x48eb46(0x10a)]))IncrementCounters();}),document[_0x4c5146(0x10d)](_0x4c5146(0x104),_0x5ab725=>{const _0x36133d=_0x4c5146;switch(!![]){case _0x5ab725[_0x36133d(0x117)]:case _0x5ab725[_0x36133d(0x10e)]:return;}switch(_0x5ab725[_0x36133d(0xec)]){case'Space':{if(!Boolean(document[_0x36133d(0xff)](_0x36133d(0xef))))break;IncrementCounters();break;}case _0x36133d(0x116):{if(_0x5ab725[_0x36133d(0x107)]&&!_0x5ab725[_0x36133d(0x120)]){if(!window[_0x36133d(0xfd)](_0x36133d(0xf0)))break;ScriptDataInit(),StorageUpdate();break;}if(_0x5ab725['ctrlKey']&&_0x5ab725[_0x36133d(0x120)]){let _0x57cfa6=localStorage[_0x36133d(0xee)](storageKeyLinesNames);if(!Boolean(_0x57cfa6))break;if(!window[_0x36133d(0xfd)](_0x36133d(0x100)))break;_0x57cfa6=JSON[_0x36133d(0x103)](_0x57cfa6);for(const _0xef308 of _0x57cfa6)localStorage[_0x36133d(0x123)](_0xef308);localStorage[_0x36133d(0x123)](storageKeyLinesNames),ScriptDataInit(),StorageUpdate(),UpdateLinesNames();break;}break;}case _0x36133d(0xfc):{if(!_0x5ab725[_0x36133d(0x107)])break;let _0x25878d=parseInt(prompt(_0x36133d(0xfe),scriptData['notifyTimeout']));_0x25878d>=0x0&&(scriptData[_0x36133d(0x10f)]=_0x25878d,StorageUpdate());break;}}return;});function _0xde79(){const _0x22ea85=['code','setTime','getItem','div.coreDocument-module-content-vaCPV','Сбросить\x20статистику\x20для\x20текущей\x20модерации?','3678695sYZRFl','cph','time_local','insertAdjacentHTML','body','Линия\x20не\x20найдена','getElementById','counter_lines','6936984DSYHGD','match','getHours','BracketRight','confirm','Через\x20сколько\x20секунд\x20неактивности\x20оповещать?\x0a0\x20=\x20без\x20уведомления\x20(по-умолчанию)\x0a600\x20=\x2010\x20минут\x0a1200\x20=\x2020\x20минут','querySelector','Сбросить\x20статистику\x20для\x20ВСЕХ\x20модерации?','hour','click','parse','keyup','push','toLocaleTimeString','ctrlKey','error','39YeMnAt','target','textContent','stringify','addEventListener','metaKey','notifyTimeout','<div\x20style=\x22bottom:\x201em;\x20position:\x20fixed;\x20right:\x202em;\x22><span\x20id=\x22time_local\x22\x20style=\x22padding-right:\x2020px;\x20color:\x20#707070\x22></span><span>Итого:\x20</span><span\x20id=\x22count\x22\x20style=\x22padding-right:\x2020px;\x22>0</span><span>За\x20час:\x20</span><span\x20id=\x22cph\x22\x20style=\x22padding-right:\x2020px;\x22>0</span><span>Неактивен:\x20</span><span\x20id=\x22time_inactive\x22>0</span></div>','3594bvTQMT','setItem','5313wRIbWF','1697666QvKwbS','663090GcDMIY','BracketLeft','altKey','time_inactive','8665407sRmYsW','now','substring','210896HgSYFg','scriptDataArray','contains','play','shiftKey','button.moderateButton-module-button-AeBfy','count','removeItem'];_0xde79=function(){return _0x22ea85;};return _0xde79();}
