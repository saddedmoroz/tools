// ==UserScript==
// @name			Maas: статистика
// @version			1.14
// @description		Отображает статистику работы
// @updateURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/maas-statistics.js
// @downloadURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/maas-statistics.js
// @author			saddedmoroz
// @match			https://moderation.avito.ru/*
// ==/UserScript==

'use strict';

const _0x59b6a0=_0xd4b8;(function(_0xc978be,_0x59cfd6){const _0x3bd4a9=_0xd4b8,_0x116536=_0xc978be();while(!![]){try{const _0x59e920=parseInt(_0x3bd4a9(0xb3))/0x1+parseInt(_0x3bd4a9(0xbb))/0x2*(parseInt(_0x3bd4a9(0xd3))/0x3)+parseInt(_0x3bd4a9(0xb4))/0x4+parseInt(_0x3bd4a9(0xe1))/0x5+-parseInt(_0x3bd4a9(0xd4))/0x6+parseInt(_0x3bd4a9(0xce))/0x7+-parseInt(_0x3bd4a9(0xcd))/0x8;if(_0x59e920===_0x59cfd6)break;else _0x116536['push'](_0x116536['shift']());}catch(_0x3e8bd1){_0x116536['push'](_0x116536['shift']());}}}(_0x50ac,0x70356));const g_audioTick=new Audio(_0x59b6a0(0xbe)),STORAGE_INIT=0x0,STORAGE_SET=0x1,STORAGE_GET=0x2,STORAGE_RESET_CURRENT=0x3,STORAGE_RESET_ALL=0x4,SEL_ACTIONS_PANEL=_0x59b6a0(0xca),g_dateRecentActivity=new Date(),g_timeLocal=new Date(),g_observer=new MutationObserver(DocumentObserver);let g_spanTimeLocal=null,g_spanTimeInactive=null,g_spanCount=null,g_spanCph=null,g_lineNameNow=null,g_timeInactive=0x0,g_scriptData=null,g_timerId=0x0;void(function(){const _0x8e09fb=_0x59b6a0,_0x2a806f=document['getElementById'](_0x8e09fb(0xa4));let _0x854fd1=new MutationObserver(DocumentObserver);_0x854fd1['observe'](_0x2a806f,{'childList':!![]}),setTimeout(()=>{const _0x632e85=_0x8e09fb;if(Boolean(document[_0x632e85(0xd7)](SEL_ACTIONS_PANEL)))DoInitialization();},0x7d0);}());function Timer(){const _0x17467d=_0x59b6a0;if(!Boolean(g_scriptData))return;g_spanCount[_0x17467d(0xaf)]=g_scriptData[_0x17467d(0xdc)],g_spanCph[_0x17467d(0xaf)]=g_scriptData[_0x17467d(0xae)],g_timeLocal[_0x17467d(0xb5)](Date['now']()),g_spanTimeLocal[_0x17467d(0xaf)]=g_timeLocal[_0x17467d(0xc8)](),g_timeInactive=parseInt((Date[_0x17467d(0xb2)]()-g_dateRecentActivity)/0x3e8);if(g_timeInactive<0x3c)g_spanTimeInactive[_0x17467d(0xaf)]=g_timeInactive;else g_spanTimeInactive[_0x17467d(0xaf)]=parseInt(g_timeInactive/0x3c)+':'+g_timeInactive%0x3c;if(g_scriptData[_0x17467d(0xc1)]){if(g_timeInactive>0x0&&g_timeInactive%g_scriptData[_0x17467d(0xc1)]==0x0)g_audioTick['play']();}}function DocumentObserver(_0x135cde){const _0x10e880=_0x59b6a0;if(_0x135cde[0x1]?.['addedNodes'][0x0]?.[_0x10e880(0xe0)]===_0x10e880(0xa3)){if(Boolean(g_timerId))clearInterval(g_timerId);}_0x135cde[0x1]?.[_0x10e880(0xc0)][0x0]?.['className']===_0x10e880(0xb8)&&DoInitialization();}function _0x50ac(){const _0xf842d4=['className','4398650IfhoDE','beforeend','homeView-module-root-_AoaF','baas-root','confirm','keyup','Space','button.ant-btn-primary','BracketRight','addEventListener','counter_','removeItem','metaKey','cph','textContent','shiftKey','code','now','853536lAVlps','2495068eHhSoE','setTime','insertAdjacentHTML','altKey','settingsView-module-root-doXyS','hour','push','18442chEMEj','substring','Сбросить\x20статистику\x20для\x20текущей\x20модерации?','https://flukeout.github.io/simple-sounds/sounds/coin.mp3','stringify','addedNodes','notifyTimeout','parse','click','target','BracketLeft','getItem','mstat','toLocaleTimeString','contains','div.actionsPanel-module-root-KBZiM','ctrlKey','counter_lines','24959120TWvRSH','4939991AqxHqs','href','time_local','time_inactive','location','291fuLDow','2266122TpbUvT','includes','getElementById','querySelector','setItem','<div\x20id=\x22mstat\x22\x20style=\x22bottom:\x201em;\x20position:\x20fixed;\x20right:\x202em;\x20font-family:\x20sans-serif;\x22><span\x20id=\x22time_local\x22\x20style=\x22padding-right:\x2020px;\x20color:\x20#707070\x22></span><span>Итого:\x20</span><span\x20id=\x22count\x22\x20style=\x22padding-right:\x2020px;\x22>0</span><span>За\x20час:\x20</span><span\x20id=\x22cph\x22\x20style=\x22padding-right:\x2020px;\x22>0</span><span>Неактивен:\x20</span><span\x20id=\x22time_inactive\x22>0</span></div>','match','body','count','getHours','Сбросить\x20статистику\x20для\x20ВСЕХ\x20модерации?','Через\x20сколько\x20секунд\x20неактивности\x20оповещать?\x0a0\x20=\x20без\x20уведомления\x20(по-умолчанию)\x0a600\x20=\x2010\x20минут\x0a1200\x20=\x2020\x20минут'];_0x50ac=function(){return _0xf842d4;};return _0x50ac();}function DoInitialization(){const _0x2f66eb=_0x59b6a0;if(Boolean(document[_0x2f66eb(0xd6)](_0x2f66eb(0xc7))))return;document[_0x2f66eb(0xdb)][_0x2f66eb(0xb6)](_0x2f66eb(0xe2),_0x2f66eb(0xd9)),g_spanTimeLocal=document['getElementById'](_0x2f66eb(0xd0)),g_spanTimeInactive=document['getElementById'](_0x2f66eb(0xd1)),g_spanCount=document[_0x2f66eb(0xd6)](_0x2f66eb(0xdc)),g_spanCph=document['getElementById'](_0x2f66eb(0xae)),StorageOperation(STORAGE_INIT),g_timerId=setInterval(Timer,0x3e8);}function StorageOperation(_0x6d2a95){const _0x144eaf=_0x59b6a0,_0x3c3f1d=_0x144eaf(0xcc),_0x20a956=_0x144eaf(0xab),_0xf78668=()=>{g_scriptData={'notifyTimeout':0x0,'hour':new Date()['getHours'](),'count':0x0,'cph':0x0};};let _0x4c7927=window[_0x144eaf(0xd2)][_0x144eaf(0xcf)][_0x144eaf(0xda)](/line\/.+?\//gi);if(Boolean(_0x4c7927))_0x4c7927=_0x4c7927[0x0],g_lineNameNow=_0x4c7927[_0x144eaf(0xbc)](0x5,_0x4c7927['length']-0x1),_0x4c7927=_0x20a956+g_lineNameNow;else return;let _0x1ff5c8=localStorage[_0x144eaf(0xc6)](_0x3c3f1d);if(Boolean(_0x1ff5c8))!_0x1ff5c8[_0x144eaf(0xd5)](_0x4c7927)&&(_0x1ff5c8=JSON[_0x144eaf(0xc2)](_0x1ff5c8),_0x1ff5c8[_0x144eaf(0xba)](_0x4c7927),localStorage[_0x144eaf(0xd8)](_0x3c3f1d,JSON[_0x144eaf(0xbf)](_0x1ff5c8)));else localStorage['setItem'](_0x3c3f1d,JSON[_0x144eaf(0xbf)]([_0x4c7927]));switch(_0x6d2a95){case STORAGE_INIT:{_0xf78668();const _0x5554cf=localStorage[_0x144eaf(0xc6)](_0x4c7927);if(Boolean(_0x5554cf))g_scriptData=JSON['parse'](_0x5554cf);else localStorage[_0x144eaf(0xd8)](_0x4c7927,JSON[_0x144eaf(0xbf)](g_scriptData));break;}case STORAGE_SET:{localStorage[_0x144eaf(0xd8)](_0x4c7927,JSON[_0x144eaf(0xbf)](g_scriptData));break;}case STORAGE_GET:{const _0x32dc18=localStorage[_0x144eaf(0xc6)](_0x4c7927);if(Boolean(_0x32dc18))g_scriptData=JSON['parse'](_0x32dc18);break;}case STORAGE_RESET_CURRENT:{_0xf78668(),localStorage[_0x144eaf(0xd8)](_0x4c7927,JSON['stringify'](g_scriptData));break;}case STORAGE_RESET_ALL:{_0xf78668(),_0x1ff5c8=JSON[_0x144eaf(0xc2)](_0x1ff5c8);for(const _0xb8f68d of _0x1ff5c8)localStorage[_0x144eaf(0xac)](_0xb8f68d);localStorage[_0x144eaf(0xac)](_0x3c3f1d);break;}}}function _0xd4b8(_0x2b965d,_0x5973ea){const _0x50ac9c=_0x50ac();return _0xd4b8=function(_0xd4b815,_0x75e1ce){_0xd4b815=_0xd4b815-0xa3;let _0x36bb71=_0x50ac9c[_0xd4b815];return _0x36bb71;},_0xd4b8(_0x2b965d,_0x5973ea);}function IncrementCounters(){const _0x2c0f00=_0x59b6a0;g_timeInactive=0x0,g_dateRecentActivity[_0x2c0f00(0xb5)](Date[_0x2c0f00(0xb2)]());const _0x5546a5=g_dateRecentActivity[_0x2c0f00(0xdd)]();if(_0x5546a5===g_scriptData['hour'])g_scriptData[_0x2c0f00(0xae)]+=0x1;else g_scriptData[_0x2c0f00(0xae)]=0x1,g_scriptData[_0x2c0f00(0xb9)]=_0x5546a5;g_scriptData['count']+=0x1,StorageOperation(STORAGE_SET);}document[_0x59b6a0(0xaa)](_0x59b6a0(0xc3),_0x46e121=>{const _0x374141=_0x59b6a0,_0x56991d=document[_0x374141(0xd7)](_0x374141(0xa8));if(!Boolean(_0x56991d))return;if(_0x56991d[_0x374141(0xc9)](_0x46e121[_0x374141(0xc4)]))IncrementCounters();}),document['addEventListener'](_0x59b6a0(0xa6),_0x108448=>{const _0x4697df=_0x59b6a0;switch(!![]){case _0x108448[_0x4697df(0xb7)]:case _0x108448[_0x4697df(0xad)]:return;}switch(_0x108448[_0x4697df(0xb1)]){case _0x4697df(0xa7):{if(_0x108448[_0x4697df(0xcb)]||_0x108448[_0x4697df(0xb0)])break;if(!Boolean(document[_0x4697df(0xd7)](SEL_ACTIONS_PANEL)))break;IncrementCounters();break;}case _0x4697df(0xc5):{if(_0x108448[_0x4697df(0xcb)]&&!_0x108448['shiftKey']){if(!window[_0x4697df(0xa5)](_0x4697df(0xbd)))break;StorageOperation(STORAGE_RESET_CURRENT);break;}if(_0x108448[_0x4697df(0xcb)]&&_0x108448['shiftKey']){if(!window[_0x4697df(0xa5)](_0x4697df(0xde)))break;StorageOperation(STORAGE_RESET_ALL);}break;}case _0x4697df(0xa9):{if(!_0x108448[_0x4697df(0xcb)]||_0x108448[_0x4697df(0xb0)])break;let _0x40135b=parseInt(prompt(_0x4697df(0xdf),g_scriptData['notifyTimeout']));_0x40135b>=0x0&&(g_scriptData[_0x4697df(0xc1)]=_0x40135b,StorageOperation(STORAGE_SET));break;}}});
