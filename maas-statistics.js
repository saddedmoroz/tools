// ==UserScript==
// @name			Maas статистика
// @version			1.13
// @description		Отображает статистику работы
// @updateURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/maas-statistics.js
// @downloadURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/maas-statistics.js
// @author			saddedmoroz
// @match			https://moderation.avito.ru/*
// ==/UserScript==

'use strict';

const _0x58c514=_0xdeba;(function(_0x4ba01a,_0x45f4c8){const _0x21d479=_0xdeba,_0x2101d6=_0x4ba01a();while(!![]){try{const _0x376edd=parseInt(_0x21d479(0x1d4))/0x1+-parseInt(_0x21d479(0x1d2))/0x2+-parseInt(_0x21d479(0x1bb))/0x3*(parseInt(_0x21d479(0x1c5))/0x4)+-parseInt(_0x21d479(0x1d8))/0x5+-parseInt(_0x21d479(0x1cb))/0x6*(parseInt(_0x21d479(0x1d7))/0x7)+-parseInt(_0x21d479(0x1b0))/0x8+parseInt(_0x21d479(0x1be))/0x9;if(_0x376edd===_0x45f4c8)break;else _0x2101d6['push'](_0x2101d6['shift']());}catch(_0x863d8e){_0x2101d6['push'](_0x2101d6['shift']());}}}(_0x139d,0xedcb6));const g_audioTick=new Audio(_0x58c514(0x1ab)),STORAGE_INIT=0x0,STORAGE_SET=0x1,STORAGE_GET=0x2,STORAGE_RESET_CURRENT=0x3,STORAGE_RESET_ALL=0x4,SEL_ADV_CONTENT=_0x58c514(0x1dc),g_dateRecentActivity=new Date(),g_timeLocal=new Date(),g_observer=new MutationObserver(DocumentObserver);let g_spanTimeLocal=null,g_spanTimeInactive=null,g_spanCount=null,g_spanCph=null,g_lineNameNow=null,g_timeInactive=0x0,g_scriptData=null,g_timerId=0x0;void(function(){const _0x879393=document['getElementById']('baas-root');let _0x14736c=new MutationObserver(DocumentObserver);_0x14736c['observe'](_0x879393,{'childList':!![]}),setTimeout(()=>{const _0x3e3e91=_0xdeba;if(Boolean(document[_0x3e3e91(0x1cd)](SEL_ADV_CONTENT)))DoInitialization();},0x7d0);}());function Timer(){const _0x32580e=_0x58c514;if(!Boolean(g_scriptData))return;g_spanCount[_0x32580e(0x1cf)]=g_scriptData[_0x32580e(0x1de)],g_spanCph[_0x32580e(0x1cf)]=g_scriptData[_0x32580e(0x1d1)],g_timeLocal[_0x32580e(0x1d5)](Date[_0x32580e(0x1a9)]()),g_spanTimeLocal[_0x32580e(0x1cf)]=g_timeLocal[_0x32580e(0x1bd)](),g_timeInactive=parseInt((Date[_0x32580e(0x1a9)]()-g_dateRecentActivity)/0x3e8);if(g_timeInactive<0x3c)g_spanTimeInactive[_0x32580e(0x1cf)]=g_timeInactive;else g_spanTimeInactive[_0x32580e(0x1cf)]=parseInt(g_timeInactive/0x3c)+':'+g_timeInactive%0x3c;if(g_scriptData[_0x32580e(0x1ac)]){if(g_timeInactive>0x0&&g_timeInactive%g_scriptData[_0x32580e(0x1ac)]==0x0)g_audioTick[_0x32580e(0x1cc)]();}}function _0xdeba(_0x28aff9,_0x530a29){const _0x139de6=_0x139d();return _0xdeba=function(_0xdebaaf,_0x203c27){_0xdebaaf=_0xdebaaf-0x1a7;let _0x543af9=_0x139de6[_0xdebaaf];return _0x543af9;},_0xdeba(_0x28aff9,_0x530a29);}function DocumentObserver(_0x22d76f){const _0x5ca77f=_0x58c514;if(_0x22d76f[0x1]?.[_0x5ca77f(0x1c2)][0x0]?.['className']==='homeView-module-root-_AoaF'){if(Boolean(g_timerId))clearInterval(g_timerId);}_0x22d76f[0x1]?.[_0x5ca77f(0x1c2)][0x0]?.[_0x5ca77f(0x1d3)]===_0x5ca77f(0x1c9)&&DoInitialization();}function _0x139d(){const _0x1cb4d4=['toLocaleTimeString','34821810UBRCMQ','getElementById','metaKey','keyup','addedNodes','substring','contains','4vWgIpe','button.moderateButtons-module-button-oQL5k','Через\x20сколько\x20секунд\x20неактивности\x20оповещать?\x0a0\x20=\x20без\x20уведомления\x20(по-умолчанию)\x0a600\x20=\x2010\x20минут\x0a1200\x20=\x2020\x20минут','counter_','settingsView-module-root-doXyS','code','401070WqPApL','play','querySelector','counter_lines','textContent','stringify','cph','469494QdYCjk','className','973237ccbKmY','setTime','mstat','7qWzEhe','5509000IMVdDu','Space','setItem','addEventListener','div.actionsPanel-module-root-KBZiM','ctrlKey','count','includes','getItem','parse','now','BracketLeft','https://flukeout.github.io/simple-sounds/sounds/coin.mp3','notifyTimeout','getHours','altKey','hour','12214384EGGKqS','body','target','shiftKey','insertAdjacentHTML','push','Сбросить\x20статистику\x20для\x20ВСЕХ\x20модерации?','href','confirm','match','removeItem','2814393hEcHrt','time_inactive'];_0x139d=function(){return _0x1cb4d4;};return _0x139d();}function DoInitialization(){const _0x42f689=_0x58c514;if(Boolean(document['getElementById'](_0x42f689(0x1d6))))return;document[_0x42f689(0x1b1)][_0x42f689(0x1b4)]('beforeend','<div\x20id=\x22mstat\x22\x20style=\x22bottom:\x201em;\x20position:\x20fixed;\x20right:\x202em;\x20font-family:\x20sans-serif;\x22><span\x20id=\x22time_local\x22\x20style=\x22padding-right:\x2020px;\x20color:\x20#707070\x22></span><span>Итого:\x20</span><span\x20id=\x22count\x22\x20style=\x22padding-right:\x2020px;\x22>0</span><span>За\x20час:\x20</span><span\x20id=\x22cph\x22\x20style=\x22padding-right:\x2020px;\x22>0</span><span>Неактивен:\x20</span><span\x20id=\x22time_inactive\x22>0</span></div>'),g_spanTimeLocal=document[_0x42f689(0x1bf)]('time_local'),g_spanTimeInactive=document['getElementById'](_0x42f689(0x1bc)),g_spanCount=document[_0x42f689(0x1bf)]('count'),g_spanCph=document[_0x42f689(0x1bf)](_0x42f689(0x1d1)),StorageOperation(STORAGE_INIT),g_timerId=setInterval(Timer,0x3e8);}function StorageOperation(_0x5499e4){const _0x40c92b=_0x58c514,_0x3fe20e=_0x40c92b(0x1ce),_0x43c217=_0x40c92b(0x1c8),_0x19bc47=()=>{const _0x11ddcf=_0x40c92b;g_scriptData={'notifyTimeout':0x0,'hour':new Date()[_0x11ddcf(0x1ad)](),'count':0x0,'cph':0x0};};let _0x15e9da=window['location'][_0x40c92b(0x1b7)][_0x40c92b(0x1b9)](/line\/.+?\//gi);if(Boolean(_0x15e9da))_0x15e9da=_0x15e9da[0x0],g_lineNameNow=_0x15e9da[_0x40c92b(0x1c3)](0x5,_0x15e9da['length']-0x1),_0x15e9da=_0x43c217+g_lineNameNow;else return;let _0x5745ea=localStorage[_0x40c92b(0x1a7)](_0x3fe20e);if(Boolean(_0x5745ea))!_0x5745ea[_0x40c92b(0x1df)](_0x15e9da)&&(_0x5745ea=JSON['parse'](_0x5745ea),_0x5745ea[_0x40c92b(0x1b5)](_0x15e9da),localStorage[_0x40c92b(0x1da)](_0x3fe20e,JSON['stringify'](_0x5745ea)));else localStorage[_0x40c92b(0x1da)](_0x3fe20e,JSON[_0x40c92b(0x1d0)]([_0x15e9da]));switch(_0x5499e4){case STORAGE_INIT:{_0x19bc47();const _0x3154e8=localStorage[_0x40c92b(0x1a7)](_0x15e9da);if(Boolean(_0x3154e8))g_scriptData=JSON['parse'](_0x3154e8);else localStorage[_0x40c92b(0x1da)](_0x15e9da,JSON[_0x40c92b(0x1d0)](g_scriptData));break;}case STORAGE_SET:{localStorage[_0x40c92b(0x1da)](_0x15e9da,JSON[_0x40c92b(0x1d0)](g_scriptData));break;}case STORAGE_GET:{const _0x20efb3=localStorage[_0x40c92b(0x1a7)](_0x15e9da);if(Boolean(_0x20efb3))g_scriptData=JSON[_0x40c92b(0x1a8)](_0x20efb3);break;}case STORAGE_RESET_CURRENT:{_0x19bc47(),localStorage[_0x40c92b(0x1da)](_0x15e9da,JSON['stringify'](g_scriptData));break;}case STORAGE_RESET_ALL:{_0x19bc47(),_0x5745ea=JSON['parse'](_0x5745ea);for(const _0x104090 of _0x5745ea)localStorage[_0x40c92b(0x1ba)](_0x104090);localStorage[_0x40c92b(0x1ba)](_0x3fe20e);break;}}}function IncrementCounters(){const _0x2bb900=_0x58c514;g_timeInactive=0x0,g_dateRecentActivity[_0x2bb900(0x1d5)](Date[_0x2bb900(0x1a9)]());const _0x37168c=g_dateRecentActivity[_0x2bb900(0x1ad)]();if(_0x37168c===g_scriptData[_0x2bb900(0x1af)])g_scriptData['cph']+=0x1;else g_scriptData[_0x2bb900(0x1d1)]=0x1,g_scriptData[_0x2bb900(0x1af)]=_0x37168c;g_scriptData[_0x2bb900(0x1de)]+=0x1,StorageOperation(STORAGE_SET);}document[_0x58c514(0x1db)]('click',_0x406e9e=>{const _0x5ee67c=_0x58c514,_0x4204b5=document[_0x5ee67c(0x1cd)](_0x5ee67c(0x1c6));if(!Boolean(_0x4204b5))return;if(_0x4204b5[_0x5ee67c(0x1c4)](_0x406e9e[_0x5ee67c(0x1b2)]))IncrementCounters();}),document[_0x58c514(0x1db)](_0x58c514(0x1c1),_0x479917=>{const _0x19c76c=_0x58c514;switch(!![]){case _0x479917[_0x19c76c(0x1ae)]:case _0x479917[_0x19c76c(0x1c0)]:return;}switch(_0x479917[_0x19c76c(0x1ca)]){case _0x19c76c(0x1d9):{if(_0x479917[_0x19c76c(0x1dd)]||_0x479917[_0x19c76c(0x1b3)])break;if(!Boolean(document[_0x19c76c(0x1cd)](SEL_ADV_CONTENT)))break;IncrementCounters();break;}case _0x19c76c(0x1aa):{if(_0x479917[_0x19c76c(0x1dd)]&&!_0x479917[_0x19c76c(0x1b3)]){if(!window[_0x19c76c(0x1b8)]('Сбросить\x20статистику\x20для\x20текущей\x20модерации?'))break;StorageOperation(STORAGE_RESET_CURRENT);break;}if(_0x479917[_0x19c76c(0x1dd)]&&_0x479917[_0x19c76c(0x1b3)]){if(!window[_0x19c76c(0x1b8)](_0x19c76c(0x1b6)))break;StorageOperation(STORAGE_RESET_ALL);}break;}case'BracketRight':{if(!_0x479917['ctrlKey']||_0x479917['shiftKey'])break;let _0x296ca0=parseInt(prompt(_0x19c76c(0x1c7),g_scriptData[_0x19c76c(0x1ac)]));_0x296ca0>=0x0&&(g_scriptData[_0x19c76c(0x1ac)]=_0x296ca0,StorageOperation(STORAGE_SET));break;}}});
