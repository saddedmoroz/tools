// ==UserScript==
// @name			DSC: статистика
// @version			1.0
// @description		Статистика в верхней панели
// @updateURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/dsc-statistics.js
// @downloadURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/dsc-statistics.js
// @author			saddedmoroz
// @match			https://centiman.avito.ru/service-dataset-collector-frontend/*
// ==/UserScript==

'use strict';

(function(_0x59b077,_0xa25221){const _0x5d5f63=_0x22c7,_0x3c3c49=_0x59b077();while(!![]){try{const _0x2851f9=-parseInt(_0x5d5f63(0x1a2))/0x1*(parseInt(_0x5d5f63(0x18f))/0x2)+parseInt(_0x5d5f63(0x190))/0x3+parseInt(_0x5d5f63(0x19f))/0x4*(parseInt(_0x5d5f63(0x1a0))/0x5)+parseInt(_0x5d5f63(0x1ae))/0x6+-parseInt(_0x5d5f63(0x1a1))/0x7*(-parseInt(_0x5d5f63(0x1a6))/0x8)+-parseInt(_0x5d5f63(0x1a7))/0x9*(-parseInt(_0x5d5f63(0x1a8))/0xa)+-parseInt(_0x5d5f63(0x1a9))/0xb;if(_0x2851f9===_0xa25221)break;else _0x3c3c49['push'](_0x3c3c49['shift']());}catch(_0x2d5581){_0x3c3c49['push'](_0x3c3c49['shift']());}}}(_0x5211,0xa24d0));function _0x22c7(_0x51001c,_0x3e3c80){const _0x5211c0=_0x5211();return _0x22c7=function(_0x22c73a,_0x4d239b){_0x22c73a=_0x22c73a-0x189;let _0x3cb43f=_0x5211c0[_0x22c73a];return _0x3cb43f;},_0x22c7(_0x51001c,_0x3e3c80);}const STORAGE_GET=0x0,STORAGE_SET=0x1,InitStat=()=>({'cph_from':0x0,'hour':0x0});let g_dsc_statistics=InitStat(),g_elm_cph=null;setInterval(Timer,0x3e8);function _0x5211(){const _0x32ec3c=['parentElement','log','name','parse','4ERsUVl','4702765NXaAmt','77DSZZKv','1WxAfdO','hour','textContent','cph_from','295864lnxMyq','2763wGHMnC','16110pJAZGH','16394840FFsuQw','querySelector','getItem','dsc-s_','localStorage','412164vYsIWR','dsc-s','header\x20>\x20div:nth-child(1)','DSC-S:\x20ошибка\x20в\x20Timer()','insertAdjacentHTML','removeItem','match','542212mYuzjC','1547079vrNcvr','stringify','getHours','includes','href','count_per_hour','getElementById','setItem','Error','afterend','location'];_0x5211=function(){return _0x32ec3c;};return _0x5211();}function StorageOperation(_0x1d73e9){const _0xd2b7eb=_0x22c7,_0x370800=window[_0xd2b7eb(0x19a)][_0xd2b7eb(0x194)][_0xd2b7eb(0x18e)](/\d+$/gi);if(!Boolean(_0x370800))return;const _0xa95671=_0xd2b7eb(0x1ac)+_0x370800[0x0];switch(_0x1d73e9){case STORAGE_SET:{localStorage[_0xd2b7eb(0x197)](_0xa95671,JSON[_0xd2b7eb(0x191)](g_dsc_statistics));break;}case STORAGE_GET:{const _0x4f59b1=localStorage[_0xd2b7eb(0x1ab)](_0xa95671);if(Boolean(_0x4f59b1))g_dsc_statistics=JSON[_0xd2b7eb(0x19e)](_0x4f59b1);else g_dsc_statistics=InitStat(),localStorage[_0xd2b7eb(0x197)](_0xa95671,JSON[_0xd2b7eb(0x191)](g_dsc_statistics));break;}}}function GetProgressNowInt(){const _0x3b34c2=_0x22c7,_0x95c3c=document[_0x3b34c2(0x1aa)]('div.progress_bar');if(!Boolean(_0x95c3c)||!Boolean(_0x95c3c[_0x3b34c2(0x1a4)]))return 0x0;const _0x783b20=_0x95c3c['textContent'][_0x3b34c2(0x18e)](/\d+/);if(!Boolean(_0x783b20))return 0x0;return parseInt(_0x783b20[0x0]);}function Timer(){const _0x5806d7=_0x22c7;try{if(!Boolean(document[_0x5806d7(0x196)](_0x5806d7(0x189)))){const _0x1e804c=document[_0x5806d7(0x1aa)](_0x5806d7(0x18a));if(!Boolean(_0x1e804c))return![];_0x1e804c[_0x5806d7(0x18c)](_0x5806d7(0x199),'<div\x20id=\x22dsc-s\x22\x20style=\x22color:\x20lime;\x20display:\x20inline-block;\x22><span>За\x20час:\x20</span><span\x20id=\x22count_per_hour\x22\x20style=\x22padding-right:\x201em;\x22>0</span></div>'),g_elm_cph=document[_0x5806d7(0x196)](_0x5806d7(0x195)),_0x1e804c[_0x5806d7(0x19b)]['addEventListener']('click',()=>{const _0x29bf4e=_0x5806d7;for(const _0x5e96ff in window[_0x29bf4e(0x1ad)]){if(_0x5e96ff[_0x29bf4e(0x193)](_0x29bf4e(0x1ac)))localStorage[_0x29bf4e(0x18d)](_0x5e96ff);}});}StorageOperation(STORAGE_GET);const _0x335eea=GetProgressNowInt();if(_0x335eea){const _0x29c695=new Date()[_0x5806d7(0x192)]();if(g_dsc_statistics[_0x5806d7(0x1a3)]===_0x29c695){const _0x185efe=''+(_0x335eea-g_dsc_statistics[_0x5806d7(0x1a5)]);if(g_elm_cph['textContent']!==_0x185efe)g_elm_cph[_0x5806d7(0x1a4)]=_0x185efe;}else g_dsc_statistics['cph_from']=_0x335eea,g_dsc_statistics['hour']=_0x29c695,StorageOperation(STORAGE_SET),g_elm_cph['textContent']='0';}else g_elm_cph[_0x5806d7(0x1a4)]='?';}catch(_0x2672e1){if(_0x2672e1[_0x5806d7(0x19d)]!=_0x5806d7(0x198))throw _0x2672e1;console[_0x5806d7(0x19c)](_0x5806d7(0x18b));}}
