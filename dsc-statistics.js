// ==UserScript==
// @name			DSC: статистика
// @version			1.1
// @description		12-12-2024
// @updateURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/dsc-statistics.js
// @downloadURL		https://raw.githubusercontent.com/saddedmoroz/tools/master/dsc-statistics.js
// @author			saddedmoroz
// @match			https://centiman.avito.ru/service-dataset-collector-frontend/*
// ==/UserScript==

/*
	Отображает статистику в верхней панели.
	При клике по названию показатель будет сброшен на 0.
*/

'use strict';

(function(_0x5c15f3,_0x5af269){const _0x43b7a8=_0x21f4,_0x2e2120=_0x5c15f3();while(!![]){try{const _0x16e499=-parseInt(_0x43b7a8(0xdb))/0x1+-parseInt(_0x43b7a8(0xc8))/0x2+-parseInt(_0x43b7a8(0xcd))/0x3*(parseInt(_0x43b7a8(0xcf))/0x4)+-parseInt(_0x43b7a8(0xd2))/0x5*(parseInt(_0x43b7a8(0xdd))/0x6)+parseInt(_0x43b7a8(0xc9))/0x7+-parseInt(_0x43b7a8(0xe4))/0x8+parseInt(_0x43b7a8(0xdc))/0x9;if(_0x16e499===_0x5af269)break;else _0x2e2120['push'](_0x2e2120['shift']());}catch(_0xd5d7b1){_0x2e2120['push'](_0x2e2120['shift']());}}}(_0x2f7e,0xc7f7c));const STORAGE_GET=0x0,STORAGE_SET=0x1,STORAGE_RESET_COUNT=0x2,STORAGE_RESET_CPH=0x3,InitStat=()=>({'keyName':'','progressFrom':-0x1,'cphFrom':-0x1,'hour':-0x1});let g_dsc_stat=InitStat(),g_dsc_stat_cache=[g_dsc_stat],g_elm_count=null,g_elm_cph=null;function _0x21f4(_0x35b798,_0x4a6e53){const _0x2f7e22=_0x2f7e();return _0x21f4=function(_0x21f42e,_0x3dc05a){_0x21f42e=_0x21f42e-0xc8;let _0x1dd97e=_0x2f7e22[_0x21f42e];return _0x1dd97e;},_0x21f4(_0x35b798,_0x4a6e53);}function _0x2f7e(){const _0x2d8171=['click','2477588PeqdVy','9947910pxnYcb','<div\x20id=\x22dsc-s\x22\x20style=\x22color:\x20#f8f8ff;\x20display:\x20inline-block;\x20font-family:\x20monospace;\x22><span\x20id=\x22btn-reset-count\x22\x20title=\x22Кликни\x20чтобы\x20сбросить\x20этот\x20счётчик\x22>Итого:\x20</span><span\x20id=\x22count\x22\x20style=\x22padding-right:\x202em;\x22>?</span><span\x20id=\x22btn-reset-cph\x22\x20title=\x22Кликни\x20чтобы\x20сбросить\x20этот\x20счётчик\x22>За\x20час:\x20</span><span\x20id=\x22count-per-hour\x22>?</span></div>','progressFrom','addEventListener','275241ZDUVUP','querySelector','28RyLKhP','textContent','getHours','95tZAoNX','stringify','getItem','length','setTime','btn-reset-count','cphFrom','hour','header\x20>\x20div:nth-child(1)','274210vZQaoj','33399207OZXTxf','490674HTqePF','count-per-hour','keyName','afterend','match','getElementById','btn-reset-cph','4832408AhBfIh','href','dsc-s','setItem','div.progress_bar'];_0x2f7e=function(){return _0x2d8171;};return _0x2f7e();}const g_time_local=new Date(),timerInit=setInterval(()=>{const _0x49eb58=_0x21f4;if(!Boolean(document['getElementById'](_0x49eb58(0xe6)))){const _0x1763f4=document[_0x49eb58(0xce)](_0x49eb58(0xda));if(!Boolean(_0x1763f4))return;_0x1763f4['insertAdjacentHTML'](_0x49eb58(0xe0),_0x49eb58(0xca));let _0x8ad27d=document[_0x49eb58(0xe2)](_0x49eb58(0xd7));_0x8ad27d[_0x49eb58(0xcc)](_0x49eb58(0xe9),()=>{StorageOperation(STORAGE_RESET_COUNT);}),_0x8ad27d=document[_0x49eb58(0xe2)](_0x49eb58(0xe3)),_0x8ad27d[_0x49eb58(0xcc)](_0x49eb58(0xe9),()=>{StorageOperation(STORAGE_RESET_CPH);}),g_elm_count=document[_0x49eb58(0xe2)]('count'),g_elm_cph=document[_0x49eb58(0xe2)](_0x49eb58(0xde)),clearInterval(timerInit),setInterval(Timer,0x3e8);}},0x3e8);function StorageOperation(_0x1a03d0){const _0x4563d0=_0x21f4;let _0x4ceb81=window['location'][_0x4563d0(0xe5)][_0x4563d0(0xe1)](/\d+$/gi);if(!Boolean(_0x4ceb81))return;_0x4ceb81='stat-'+_0x4ceb81[0x0];switch(_0x1a03d0){case STORAGE_SET:{localStorage[_0x4563d0(0xe7)](_0x4ceb81,JSON[_0x4563d0(0xd3)](g_dsc_stat));break;}case STORAGE_GET:{if(!Boolean(g_dsc_stat['keyName']))g_dsc_stat[_0x4563d0(0xdf)]=_0x4ceb81;let _0x45b845=g_dsc_stat_cache[_0x4563d0(0xd5)],_0x42f425=![];while(_0x45b845--){g_dsc_stat_cache[_0x45b845][_0x4563d0(0xdf)]==_0x4ceb81&&(g_dsc_stat=g_dsc_stat_cache[_0x45b845],_0x42f425=!![]);}!_0x42f425&&(g_dsc_stat=InitStat(),g_dsc_stat[_0x4563d0(0xdf)]=_0x4ceb81,g_dsc_stat_cache['push'](g_dsc_stat));const _0x577512=localStorage[_0x4563d0(0xd4)](_0x4ceb81);if(Boolean(_0x577512)){const _0xea6112=JSON['parse'](_0x577512);g_dsc_stat[_0x4563d0(0xcb)]=_0xea6112['progressFrom'],g_dsc_stat[_0x4563d0(0xd8)]=_0xea6112[_0x4563d0(0xd8)],g_dsc_stat[_0x4563d0(0xd9)]=_0xea6112[_0x4563d0(0xd9)];}else localStorage[_0x4563d0(0xe7)](_0x4ceb81,JSON['stringify'](g_dsc_stat));break;}case STORAGE_RESET_COUNT:case STORAGE_RESET_CPH:{if(_0x1a03d0==STORAGE_RESET_COUNT)g_dsc_stat[_0x4563d0(0xcb)]=-0x1;else g_dsc_stat[_0x4563d0(0xd8)]=-0x1;localStorage['setItem'](_0x4ceb81,JSON[_0x4563d0(0xd3)](g_dsc_stat));break;}}}function GetProgressNowInt(){const _0x452794=_0x21f4,_0x373198=document['querySelector'](_0x452794(0xe8));if(!Boolean(_0x373198)||!Boolean(_0x373198['textContent']))return-0x1;const _0x53a024=_0x373198[_0x452794(0xd0)][_0x452794(0xe1)](/\d+/);if(!Boolean(_0x53a024))return-0x1;return parseInt(_0x53a024[0x0]);}function Timer(){const _0x409d01=_0x21f4;g_time_local[_0x409d01(0xd6)](Date['now']());const _0x5e187a=g_time_local[_0x409d01(0xd1)]();StorageOperation(STORAGE_GET);const _0x841337=GetProgressNowInt();if(_0x841337>=0x0){g_dsc_stat[_0x409d01(0xcb)]<0x0&&(g_dsc_stat[_0x409d01(0xcb)]=_0x841337,StorageOperation(STORAGE_SET));g_dsc_stat[_0x409d01(0xd8)]<0x0&&(g_dsc_stat[_0x409d01(0xd8)]=_0x841337,StorageOperation(STORAGE_SET));const _0x4ac620=''+(_0x841337-g_dsc_stat['progressFrom']);if(g_elm_count[_0x409d01(0xd0)]!=_0x4ac620)g_elm_count[_0x409d01(0xd0)]=_0x4ac620;if(g_dsc_stat[_0x409d01(0xd9)]==_0x5e187a){const _0x4b169d=''+(_0x841337-g_dsc_stat[_0x409d01(0xd8)]);if(g_elm_cph['textContent']!=_0x4b169d)g_elm_cph[_0x409d01(0xd0)]=_0x4b169d;}else g_dsc_stat['cphFrom']=_0x841337,g_dsc_stat[_0x409d01(0xd9)]=_0x5e187a,StorageOperation(STORAGE_SET),g_elm_cph[_0x409d01(0xd0)]='0';}else g_elm_count[_0x409d01(0xd0)]=g_elm_cph[_0x409d01(0xd0)]='?';}
